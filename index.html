
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=8mn3xzptkk"></script>
<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
<meta charset="EUC-KR">
<title>Insert title here</title>
</head>


<body>

<!-- 네이버 지도가 뿌려질 곳 !  -->
<div id="map" style="width:100%;height:75vh; margin: 0 auto;"></div>


</body>


<script type="text/javascript">

$(function() {
  
  initMap();
  
});


function initMap() { 
  
  var areaArr = new Array();  // 지역을 담는 배열 ( 지역명/위도경도 )
  areaArr.push(
          /*지역구 이름*/			/*위도*/					/*경도*/				
       {location : '본찌돈까스' , lat : '37.2971523' , lng : '126.9715006', description: '율전에서 이색적인 음식을 먹고싶다면!'},  // 강남구 중심좌표
       {location : '벨라튀니지' , lat : '37.2972199' , lng : '126.9713739', description: '율전에서 이색적인 음식을 먹고싶다면!'},  // 강동구 중심좌표
       {location : '알촌' , lat : '37.297476' , lng : '126.9717054', description: '율전에서 이색적인 음식을 먹고싶다면!'},  // 강북구 중심좌표
       {location : '무대포핫도그' , lat : '37.2969972' , lng : '126.9712576', description: '율전에서 이색적인 음식을 먹고싶다면!'},  // 강서구 중심좌표


  );
  
  
  
  let markers = new Array(); // 마커 정보를 담는 배열
  let infoWindows = new Array(); // 정보창을 담는 배열
  
  let _BASE = new naver.maps.LatLng(37.2939419, 126.9754234);
  let _ZOOM = 16;
  var menuLayer = $('<div style="position:absolute;z-index:10000;background-color:#fff;border:solid 1px #333;padding:10px;display:none;"></div>');


  // Map Options
  var mapOptions = {
    center: _BASE, //지도 시작 지점
    zoom: _ZOOM,
    zoomControl: true,
    zoomControlOptions: {
            position: naver.maps.Position.TOP_LEFT,
            style: naver.maps.ZoomControlStyle.SMALL
        },
    scaleControl: true,
    scaleControlOptions: {position: naver.maps.Position.BOTTOM_RIGHT},
    mapDataControl: false,
  };

  // Here we render Naver Map 
  var map = new naver.maps.Map('map', mapOptions)

  // Make an event for the map
  naver.maps.Event.addListener(map, 'zoom_changed', function(e) {
    if(e > 15) {
        marker1.setMap(map);
    }
    else {
        marker1.setMap(null);
    }

  });

  
  
 // 지역을 담은 배열의 길이만큼 for문으로 마커와 정보창을 채워주자 !

 // We are taking our predefined marker information into the markers, infoWindows array

  for (var i = 0; i < areaArr.length; i++) {

      var marker = new naver.maps.Marker({
          map: map,
          title: areaArr[i].location, // 지역구 이름 
          position: new naver.maps.LatLng(areaArr[i].lat , areaArr[i].lng) // 지역구의 위도 경도 넣기 
      });
      
      /* 정보창 */
       var infoWindow = new naver.maps.InfoWindow({
           content: '<div style="width:200px;text-align:center;padding:10px;"><b>' + areaArr[i].location + '</b><br>' + areaArr[i].description +  ' </div>'
       }); // 클릭했을 때 띄워줄 정보 HTML 작성
      
       markers.push(marker); // 생성한 마커를 배열에 담는다.
       infoWindows.push(infoWindow); // 생성한 정보창을 배열에 담는다.
  }

  // This displays all of the markers when the map loads
  
   
  // This opens up the info when we click on the marker
  function getClickHandler(seq) {
      
          return function(e) {  // 마커를 클릭하는 부분
              var marker = markers[seq], // 클릭한 마커의 시퀀스로 찾는다.
                  infoWindow = infoWindows[seq]; // 클릭한 마커의 시퀀스로 찾는다

              if (infoWindow.getMap()) {
                  infoWindow.close(); // We close the info tab if we already clicked on it
              } else {
                  infoWindow.open(map, marker); // 표출
              }
          }
    }

      naver.maps.Event.addListener(map, 'click', newMarker(seq))
      
      function newMarker(seq) {

        var coordHtml =
            'Coord: '+ '(우 클릭 지점 위/경도 좌표)' + '<br />' +
            'Point: ' + e.point + '<br />' +
            'Offset: ' + e.offset;

        menuLayer.show().css({
            left: e.offset.x,
            top: e.offset.y
        }).html(coordHtml);

        var marker = new naver.maps.Marker({
            position: e.coord,
            map: map
        });

        markers.push(marker);
    }
  
      // This function pops up the info when we click on the according marker
  for (var i=0, ii=markers.length; i< ii; i++) { 
      console.log(markers[i] , getClickHandler(i));
      naver.maps.Event.addListener(markers[i], 'click', getClickHandler(i)); // 클릭한 마커 핸들러
  }

  var polyline = new naver.maps.Polyline({
    map: map,
    path: [
        new naver.maps.LatLng(37.359924641705476, 127.1148204803467),
        new naver.maps.LatLng(37.36343797188166, 127.11486339569092),
        new naver.maps.LatLng(37.368520071054576, 127.11473464965819),
        new naver.maps.LatLng(37.3685882848096, 127.1088123321533),
        new naver.maps.LatLng(37.37295383612657, 127.10876941680907),
        new naver.maps.LatLng(37.38001321351567, 127.11851119995116),
        new naver.maps.LatLng(37.378546827477855, 127.11984157562254),
        new naver.maps.LatLng(37.376637072444105, 127.12052822113036),
        new naver.maps.LatLng(37.37530703574853, 127.12190151214598),
        new naver.maps.LatLng(37.371657839593894, 127.11645126342773),
        new naver.maps.LatLng(37.36855417793982, 127.1207857131958)
        ]
    });



}


</script>

</html>
